<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFAD Afet Yönetim Haritası</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="harita2.css">
    <script>
        // Pass API keys to JavaScript (injected by Python)
        window.MAPS_API_KEY = 'YOUR_GOOGLE_MAPS_API_KEY';
        window.WEATHER_API_KEY = 'YOUR_OPENWEATHERMAP_API_KEY';
    </script>
</head>
<body>
    <div id="map"></div>
    <div id="overlay-info"></div>
    <button id="toggle-btn">☰</button>
    <div id="marker-toolbar">
        <button class="marker-btn" onclick="selectMarkerType('ambulance')"><img src="https://cdn-icons-png.flaticon.com/512/3097/3097378.png"> Ambulans</button>
        <button class="marker-btn" onclick="selectMarkerType('police')"><img src="https://cdn-icons-png.flaticon.com/512/3063/3063173.png"> Polis</button>
        <button class="marker-btn" onclick="selectMarkerType('healthcare')"><img src="https://cdn-icons-png.flaticon.com/512/2888/2888679.png"> Sağlıkçı</button>
        <button class="marker-btn" onclick="selectMarkerType('gendarmerie')"><img src="https://cdn-icons-png.flaticon.com/512/2997/2997328.png"> Jandarma</button>
        <button class="marker-btn" onclick="selectMarkerType('tentcity')"><img src="https://cdn-icons-png.flaticon.com/512/2457/2457421.png"> Çadırkent</button>
        <button class="marker-btn" id="add-team-btn" onclick="selectMarkerType('team')"><img src="https://cdn-icons-png.flaticon.com/512/992/992651.png"> Ekip Ekle</button>
        <button class="marker-btn" onclick="startTriangleDraw()"><img src="https://cdn-icons-png.flaticon.com/512/148/148781.png"> Üçgen Çiz</button>
    </div>
    <div id="sidebar">
        <div class="control-panel">
            <h2>Afet Kontrol Paneli</h2>
            <div class="layer-control">
                <h3>Katmanlar</h3>
                <label><input type="checkbox" class="layer-checkbox" data-layer="tentcityMarkers" checked> Çadırkentler</label>
                <label><input type="checkbox" class="layer-checkbox" data-layer="earthquakeMarkers" checked> Son Depremler</label>
                <label><input type="checkbox" class="layer-checkbox" data-layer="assemblyMarkers"> Toplanma Alanları</label>
            </div>
            <button id="shortest-path-btn" class="btn-custom">
                <img src="https://cdn-icons-png.flaticon.com/512/1087/1087033.png"> En Kısa Yolu Bul
            </button>
            <div class="search-container">
                <input id="search-input" type="text" placeholder="Yer ara (örn. Ankara restoran)" autocomplete="off">
                <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" class="search-icon" alt="Ara">
            </div>
            <ul id="search-results"></ul>
            <gmp-place-details id="place-details" style="display: none;"></gmp-place-details>
            <div id="street-view-pane"></div>
            <div id="elevation-info">Yükseklik bilgisi burada görünecek.</div>
            <gmp-aerial-view id="aerial-view" style="display: none;"></gmp-aerial-view>
            <div class="weather-search-container">
                <input id="weather-input" type="text" placeholder="Şehir ara (Hava Durumu)" autocomplete="off">
                <img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" class="weather-search-icon" alt="Ara">
            </div>
            <button id="weather-search-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/869/869869.png"> Hava Durumu</button>
            <button id="clear-markers" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png"> Tüm İşaretçileri Temizle</button>
            <button id="zoom-to-fit" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/3161/3161358.png"> İşaretçilere Yakınlaştır</button>
            <button id="current-location" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/684/684908.png"> Mevcut Konum</button>
            <button id="traffic-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/2965/2965879.png"> Trafik Göster</button>
            <button id="clear-polygons" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/1214/1214428.png"> Poligonları Temizle</button>
            <button id="heatmap-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/3161/3161358.png"> Heatmap Göster</button>
            <button id="air-quality-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/869/869869.png"> Hava Kalitesi</button>
            <button id="assembly-areas-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/684/684908.png"> Toplanma Alanları</button>
            <button id="toggle-3d-btn" class="btn-custom"><img src="https://cdn-icons-png.flaticon.com/512/3161/3161358.png"> 3D Görünüme Geç</button>
            <select class="form-select" onchange="map.setMapTypeId(this.value)">
                <option value="roadmap">Yol Haritası</option>
                <option value="satellite">Uydu</option>
                <option value="hybrid">Hibrit</option>
                <option value="terrain">Arazi</option>
            </select>
        </div>
        <div class="control-panel">
            <h3>Afet Noktaları</h3>
            <div id="marker-list"></div>
        </div>
        <div id="info-panel">Afet Yönetim Bilgi Paneli</div>
    </div>
    <div id="team-modal">
        <h3>Ekip Bilgileri</h3>
        <form id="team-form">
            <input id="team-name" type="text" class="form-input" placeholder="Ekip Adı" required>
            <input id="team-type" type="text" class="form-input" placeholder="Ekip Türü">
            <input id="team-size" type="number" class="form-input" placeholder="Ekipteki Kişi Sayısı" min="1">
            <select id="team-status" class="form-input">
                <option value="Aktif">Aktif</option>
                <option value="Pasif">Pasif</option>
            </select>
            <button type="submit" class="btn-custom">Ekle</button>
            <button type="button" id="cancel-team-btn" class="btn-custom btn-cancel">İptal</button>
        </form>
    </div>
    <div id="tentcity-modal">
        <h3>Çadırkent Bilgileri</h3>
        <form id="tentcity-form">
            <input id="tentcity-name" type="text" class="form-input" placeholder="Çadırkent Adı" required>
            <input id="tentcity-capacity" type="number" class="form-input" placeholder="Kapasite (Kişi)" min="1">
            <select id="tentcity-status" class="form-input">
                <option value="Aktif">Aktif</option>
                <option value="Pasif">Pasif</option>
            </select>
            <input id="tentcity-resources" type="text" class="form-input" placeholder="Kaynaklar (örn. Yiyecek, Su)">
            <button type="submit" class="btn-custom">Ekle</button>
            <button type="button" id="cancel-tentcity-btn" class="btn-custom btn-cancel">İptal</button>
        </form>
    </div>
    <div id="polygon-modal" style="display: none;">
        <div id="polygon-info"></div>
        <button onclick="closePolygonModal()">Kapat</button>
        <button onclick="editPolygonNote()">Notu Düzenle</button>
        <button onclick="deletePolygon()">Sil</button>
    </div>
    <script src="harita2.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places,drawing,visualization,geometry,elevation&loading=async&callback=initMap"></script>
</body>
</html>